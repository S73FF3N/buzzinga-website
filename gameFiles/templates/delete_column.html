{% load gameFiles_tags %}
<a class="btn btn-info btn-sm confirm-delete " href="
{% if record|to_class_name == 'Category' %}
    {% url 'gamefiles:category-delete' record.pk %}
{% else %}
    {% if record.category.game_type.pk == 2 %}
        {% url 'gamefiles:sound-delete' record.pk %}
    {% elif record.category.game_type.pk == 1 %}
        {% url 'gamefiles:image-delete' record.pk %}
    {% elif record.category.game_type.pk == 4 %}
        {% url 'gamefiles:question-delete' record.pk %}
    {% elif record.category.game_type.pk == 3 %}
        {% url 'gamefiles:hint-delete' record.pk %}
    {% else %}
        {% url 'gamefiles:whoknowsmore-delete' record.pk %}
    {% endif %}
{% endif %}
"
data-confirm="Are you sure you want to delete this item?"><i class="fa fa-trash"></i></a>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const deleteLinks = document.querySelectorAll('.confirm-delete');
    
        deleteLinks.forEach(link => {
            link.addEventListener('click', function (event) {
                event.preventDefault(); // Prevent default navigation
    
                const confirmMessage = this.getAttribute('data-confirm');
                if (confirm(confirmMessage)) {
                    // Create a form to submit a POST request
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = this.href;
                    
                    // Add CSRF token
                    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
                    const csrfInput = document.createElement('input');
                    csrfInput.type = 'hidden';
                    csrfInput.name = 'csrfmiddlewaretoken';
                    csrfInput.value = csrfToken;
                    form.appendChild(csrfInput);
                    
                    document.body.appendChild(form);
                    form.submit();
                }
            });
        });
    });
</script>